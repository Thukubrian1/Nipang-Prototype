<div class="dashboard-container">
  <!-- Sidebar -->
  <app-sidebar 
    [isOpen]="isSidebarOpen" 
    (toggleSidebar)="handleSidebarToggle()">
  </app-sidebar>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Top Bar -->
    <app-topbar
      [adminName]="adminName"
      [role]="role"
      [userAvatar]="userAvatar"
      (searchQuery)="handleSearch($event)">
    </app-topbar>

    <!-- System Roles Content -->
    <div class="roles-content">
      
      <!-- Tabs Navigation -->
      <div class="tabs-navigation">
        <button 
          class="tab-button" 
          [class.active]="activeTab === 'roles'"
          (click)="switchTab('roles')">
          Roles
        </button>
        <button 
          class="tab-button" 
          [class.active]="activeTab === 'reasons'"
          (click)="switchTab('reasons')">
          Reasons
        </button>

        <!-- Search Bar -->
        <div class="tab-search">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <select class="search-dropdown" [(ngModel)]="searchBy">
            <option *ngIf="activeTab === 'roles'" value="role">Role</option>
            <option *ngIf="activeTab === 'roles'" value="status">Status</option>
            <option *ngIf="activeTab === 'reasons'" value="reason">Reason</option>
            <option *ngIf="activeTab === 'reasons'" value="type">Type</option>
            <option *ngIf="activeTab === 'reasons'" value="status">Status</option>
          </select>
          <input 
            type="text" 
            [placeholder]="activeTab === 'roles' ? 'Search by role, status...' : 'Search by reason, type...'" 
            class="search-input"
            [(ngModel)]="searchQuery">
        </div>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        
        <!-- Roles Tab -->
        <div *ngIf="activeTab === 'roles'" class="roles-tab">
          <div class="section-header">
            <div>
              <h2 class="section-title">System Roles</h2>
              <p class="section-subtitle">Create and manage access to the admin dashboard by Creating Roles and Permissions.</p>
            </div>
            <button class="btn-primary" (click)="addSystemRole()">Add System Role</button>
          </div>

          <!-- Stats Cards -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-header">
                <h3>Total Roles</h3>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
              </div>
              <div class="stat-value">{{totalRoles}}</div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <h3>Active</h3>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
              </div>
              <div class="stat-value">{{activeRoles}}</div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <h3>Inactive</h3>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
              </div>
              <div class="stat-value">{{inactiveRoles}}</div>
            </div>
          </div>

          <!-- Roles Table -->
          <div class="data-table">
            <table>
              <thead>
                <tr>
                  <th>Role</th>
                  <th>Assigned Users</th>
                  <th>Last Activity</th>
                  <th>Status</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let role of roles">
                  <td class="role-name">{{role.name}}</td>
                  <td>{{role.assignedUsers}}</td>
                  <td>{{role.lastActivity}}</td>
                  <td>
                    <span class="status-badge" [class.active]="role.status === 'Active'" [class.inactive]="role.status === 'Inactive'">
                      {{role.status}}
                    </span>
                  </td>
                  <td class="actions-cell">
                    <button class="btn-text" (click)="editRole(role.id)">Edit</button>
                    <button class="btn-text delete" (click)="deleteRole(role.id)">Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Reasons Tab -->
        <div *ngIf="activeTab === 'reasons'" class="reasons-tab">
          <div class="section-header">
            <div>
              <h2 class="section-title">Reasons</h2>
              <p class="section-subtitle">Create and manage reasons as to why users have been suspended, rejected or reinstated</p>
            </div>
            <button class="btn-primary" (click)="addReason()">Add Reason</button>
          </div>

          <!-- Stats Cards -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-header">
                <h3>Total Reasons</h3>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
              </div>
              <div class="stat-value">{{totalReasons}}</div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <h3>Active</h3>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
              </div>
              <div class="stat-value">{{activeReasons}}</div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <h3>Inactive</h3>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
              </div>
              <div class="stat-value">{{inactiveReasons}}</div>
            </div>
          </div>

          <!-- Reasons Table -->
          <div class="data-table">
            <table>
              <thead>
                <tr>
                  <th>Reason</th>
                  <th>Reason Type</th>
                  <th>Applicable To</th>
                  <th>Status</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let reason of reasons">
                  <td class="reason-text">{{reason.reason}}</td>
                  <td>{{reason.type}}</td>
                  <td>{{reason.applicableTo}}</td>
                  <td>
                    <span class="status-badge" [class.active]="reason.status === 'Active'" [class.inactive]="reason.status === 'Inactive'">
                      {{reason.status}}
                    </span>
                  </td>
                  <td class="actions-cell">
                    <button class="btn-text" (click)="editReason(reason.id)">Edit</button>
                    <button class="btn-text delete" (click)="deleteReason(reason.id)">Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>
  </main>
</div>